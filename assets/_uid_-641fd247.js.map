{"version":3,"file":"_uid_-641fd247.js","sources":["../../src/pages/defs/[uid].vue"],"sourcesContent":["<script setup>\nimport { useTimeAgo } from '@vueuse/core';\nimport { directus } from '~/use/useDb';\nimport { messages } from '../../use/useDictionary';\n\n\n\nconst props = defineProps({\n\tuid: { type: String, default: '' }\n})\n\nconst def = ref()\nconst words = reactive([]);\n\n\nasync function load() {\n\tconst data = await directus\n\t\t.items('definitions')\n\t\t.readOne(props.uid);\n\tdef.value = data;\n\n\tfor (let id of def.value.words) {\n\n\t\tlet link = await directus\n\t\t\t.items('links')\n\t\t\t.readOne(id)\n\n\t\tlet word = await directus\n\t\t\t.items('words')\n\t\t\t.readOne(link.word)\n\n\t\twords.push(word)\n\t}\n\n}\n\nload()\n\nconst timeAgo = useTimeAgo(computed(() => def.value?.date_created), { messages })\n\n</script>\n\n<template lang='pug'>\n.flex.flex-col.gap-2(v-if=\"def\") \n\t.text-2xl {{def.text}}\n\tAuthorBadge(v-if=\"def?.user_created\" :uid=\"def?.user_created\") {{timeAgo}}\n\t.flex.flex-col.gap-2 \n\t\tWordCard(v-for=\"word in words\" :key=\"word.id\" v-bind=\"word\")\n</template>"],"names":["props","__props","def","ref","words","reactive","load","data","directus","id","link","word","timeAgo","useTimeAgo","computed","_a","messages"],"mappings":"ydAOA,MAAAA,EAAAC,EAIAC,EAAAC,EAAA,EACAC,EAAAC,EAAA,CAAA,CAAA,EAGA,eAAAC,GAAA,CACA,MAAAC,EAAA,MAAAC,EACA,MAAA,aAAA,EACA,QAAAR,EAAA,GAAA,EACAE,EAAA,MAAAK,EAEA,QAAAE,KAAAP,EAAA,MAAA,MAAA,CAEA,IAAAQ,EAAA,MAAAF,EACA,MAAA,OAAA,EACA,QAAAC,CAAA,EAEAE,EAAA,MAAAH,EACA,MAAA,OAAA,EACA,QAAAE,EAAA,IAAA,EAEAN,EAAA,KAAAO,CAAA,CACA,CAEA,CAEAL,EAAA,EAEA,MAAAM,EAAAC,EAAAC,EAAA,IAAA,OAAA,OAAAC,EAAAb,EAAA,QAAA,YAAAa,EAAA,aAAA,EAAA,CAAA,SAAAC,EAAA"}