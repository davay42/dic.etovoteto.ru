{"version":3,"file":"useAuth.d5bef1b5.js","sources":["../../src/use/useAuth.js"],"sourcesContent":["import { directus } from \"./useDb\"\n\nexport const auth = reactive({\n\ted: false,\n\tinvalid: null,\n\tme: {}\n})\n\nexport function useAuth() {\n\n\tconst credentials = reactive({\n\t\temail: '',\n\t\tpassword: ''\n\t})\n\n\n\tasync function enter() {\n\t\tawait directus.auth.login(credentials).then(async (user) => {\n\t\t\tauth.me = await directus.users.me.read();\n\t\t\tauth.token = user.access_token\n\t\t\tauth.till = Date.now() + user.expires\n\t\t\tauth.ed = true\n\t\t\tauth.invalid = false\n\t\t}).catch(() => auth.invalid = true)\n\t}\n\n\tasync function refresh() {\n\t\tawait directus.auth\n\t\t\t.refresh()\n\t\t\t.then(() => {\n\t\t\t\tauth.ed = true;\n\t\t\t})\n\t\t\t.catch(() => console.warn(\"couldn't refresh\"));\n\t}\n\n\n\n\treturn { auth, credentials, enter, refresh }\n}"],"names":["auth","reactive","useAuth","credentials","enter","directus","user","refresh"],"mappings":"yEAEA,MAAAA,EAAAC,EAAA,CACA,GAAA,GACA,QAAA,KACA,GAAA,CAAA,CACA,CAAA,EAEA,SAAAC,GAAA,CAEA,MAAAC,EAAAF,EAAA,CACA,MAAA,GACA,SAAA,EACA,CAAA,EAGA,eAAAG,GAAA,CACA,MAAAC,EAAA,KAAA,MAAAF,CAAA,EAAA,KAAA,MAAAG,GAAA,CACAN,EAAA,GAAA,MAAAK,EAAA,MAAA,GAAA,OACAL,EAAA,MAAAM,EAAA,aACAN,EAAA,KAAA,KAAA,IAAA,EAAAM,EAAA,QACAN,EAAA,GAAA,GACAA,EAAA,QAAA,EACA,CAAA,EAAA,MAAA,IAAAA,EAAA,QAAA,EAAA,CACA,CAEA,eAAAO,GAAA,CACA,MAAAF,EAAA,KACA,QAAA,EACA,KAAA,IAAA,CACAL,EAAA,GAAA,EACA,CAAA,EACA,MAAA,IAAA,QAAA,KAAA,kBAAA,CAAA,CACA,CAIA,MAAA,CAAA,KAAAA,EAAA,YAAAG,EAAA,MAAAC,EAAA,QAAAG,CAAA,CACA"}