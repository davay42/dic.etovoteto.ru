{"version":3,"file":"index.5109bd50.js","sources":["../../src/components/word/WordCard.vue","../../src/pages/words/index.vue"],"sourcesContent":["<script setup async>\nimport { renderWord } from '~/use/useDictionary.js'\nimport { useWordDefs, useAuthor, messages } from '~/use/useDb.js'\nimport { useTimeAgo } from '@vueuse/core'\n\nconst props = defineProps({\n\tid: { type: Number, default: 0 },\n\tletters: { type: String, default: '' },\n\tstress: { type: Number, default: 0 },\n\tdefs: { type: Array, default: [] },\n\tuser_created: { type: String, default: '' },\n\tdate_created: { type: String, default: '' }\n})\n\nconst defs = useWordDefs(props.defs)\n\nconst { user } = useAuthor(props.user_created)\n\nconst timeAgo = useTimeAgo(props.date_created, {\n\tmessages\n})\n\n</script>\n\n<template lang='pug'>\n.card.relative \n\t.flex.items-center\n\t\trouter-link.text-2xl.font-bold(v-html=\"renderWord(letters, stress)\" :to=\"`/words/${id}`\")\n\t\t.flex-auto\n\t\trouter-link.px-2.pb-1.rounded-xl.text-sm.py-0.bg-light-800.dark_bg-dark-800.opacity-20.hover-opacity-90.transition(\n\t\t\t:to=\"`/authors/${user?.id}`\"\n\t\t) {{ user?.first_name }} {{ user?.last_name }}\n\t.flex.flex-col.gap-4.py-4\n\t\trouter-link.card(v-for=\"def in defs\" :key=\"def\" :to=\"`/defs/${def.id}`\") {{ def.text }}\n\t.absolute.bottom-2.right-2.text-xs.opacity-30 {{ timeAgo }}\n\tslot\n</template>\n","<script setup>\nimport { directus } from '~/use/useDb.js'\n\n\nfunction useWords() {\n\tconst words = ref()\n\tconst count = ref(0)\n\n\tasync function load() {\n\t\tconst {\n\t\t\tdata,\n\t\t\tmeta: { total_count }\n\t\t} = await directus\n\t\t\t.items('words')\n\t\t\t.readByQuery({\n\t\t\t\tmeta: 'total_count'\n\t\t\t});\n\n\t\twords.value = data\n\t\tcount.value = total_count\n\t}\n\n\tload()\n\n\treturn {\n\t\twords, count, load\n\t}\n}\n\nconst { words, count, load } = useWords()\n\n</script>\n\n<template lang='pug'>\n.flex.flex-col.gap-4.py-4\n\t.flex.flex-col.gap-4\n\t\tWordCard(\n\t\t\tv-for=\"word in words\" :key=\"word.id\"\n\t\t\tv-bind=\"word\"\n\t\t\t) \n</template>"],"names":["defs","useWordDefs","props","user","useAuthor","timeAgo","useTimeAgo","messages","useWords","words","ref","count","load","data","total_count","directus"],"mappings":"8qBAcAA,EAAAC,EAAAC,EAAA,IAAA,EAEA,CAAA,KAAAC,CAAA,EAAAC,EAAAF,EAAA,YAAA,EAEAG,EAAAC,EAAAJ,EAAA,aAAA,CACA,SAAAK,CACA,CAAA,gxBChBA,SAAAC,GAAA,CACA,MAAAC,EAAAC,EAAA,EACAC,EAAAD,EAAA,CAAA,EAEA,eAAAE,GAAA,CACA,KAAA,CACA,KAAAC,EACA,KAAA,CAAA,YAAAC,CAAA,CACA,EAAA,MAAAC,EACA,MAAA,OAAA,EACA,YAAA,CACA,KAAA,aACA,CAAA,EAEAN,EAAA,MAAAI,EACAF,EAAA,MAAAG,CACA,CAEA,OAAAF,EAAA,EAEA,CACA,MAAAH,EAAA,MAAAE,EAAA,KAAAC,CACA,CACA,CAEA,KAAA,CAAA,MAAAH,EAAA,MAAAE,EAAA,KAAAC,CAAA,EAAAJ,EAAA"}